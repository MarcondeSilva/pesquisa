<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesquisa de Satisfação - Ambiente de Trabalho</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 600px;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h2 {
            margin-bottom: 20px;
            color: #333;
        }
        .input-container {
            margin-bottom: 15px;
            text-align: left;
        }
        .input-container label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .input-container input[type="text"] {
            width: 95%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            text-transform: capitalize; /* Opcional: exibe visualmente com primeira letra maiúscula */
        }
        button {
            width: 100%;
            padding: 12px;
            border: none;
            background-color: #d9534f;
            color: white;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 10px;
        }
        button:hover {
            background-color: #c9302c;
        }
        .hidden {
            display: none;
        }
        fieldset {
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: left;
        }
        legend {
            font-weight: bold;
            padding: 0 5px;
        }
        label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }
        input[type="radio"] {
            margin-right: 8px;
        }
        textarea {
            width: 95%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-family: Arial, sans-serif;
            resize: vertical;
        }
        .success-message {
            color: #28a745;
            font-weight: bold;
            margin: 15px 0;
        }
        .link-relatorio {
            display: block;
            margin-top: 20px;
            color: #d9534f;
            text-decoration: none;
            font-weight: bold;
        }
        .texto-aviso {  
            font-weight: normal;  
            font-size: 14px;      
            color: #333;          
            margin-top: 1px;      
            margin-left: 12px;
            text-align: justify;
        }
    </style>
</head>
<body>
    <div class="container hidden" id="step1">
        <h2>Bem-vindo! Vamos começar.</h2>
        <div class="input-container">
            <label for="nome">Digite seu nome:</label>
            <input type="text" id="nome" required>
        </div>
        <button onclick="proximoPasso()">Continuar</button>
    </div>

    <div class="container hidden" id="step2">
        <h2>Ótimo, <span id="userName">Carla</span>! Agora, digite sua loja.</h2>
        <div class="input-container">
            <label for="loja">Digite a loja:</label>
            <input type="text" id="loja" required>
        </div>
        <button onclick="iniciarPesquisa()">Iniciar Pesquisa</button>
    </div>

    <div class="container hidden" id="survey">
        <h2>Avaliação de Riscos Psicossociais no Trabalho</h2>
        <p class="texto-aviso">  
            Esta avaliação tem como objetivo identificar fatores que possam estar afetando o bem-estar psicológico de nossos colaboradores. Suas respostas são confidenciais e contribuirão para melhorar a qualidade do ambiente de trabalho. Pedimos que você responda com sinceridade.  
        </p>

        <form id="surveyForm">
            <input type="hidden" id="hiddenNome" name="nome" value="">
            <input type="hidden" id="hiddenLoja" name="loja" value="">
            
            <fieldset>
                <legend>1. Você se sente respeitado e valorizado no ambiente de trabalho?</legend>
                <label><input type="radio" name="respeito_valorizado" value="Sim" required> Sim</label>
                <label><input type="radio" name="respeito_valorizado" value="Não"> Não</label>
                <label><input type="radio" name="respeito_valorizado" value="Mais ou menos"> Mais ou menos</label>
            </fieldset>

            <fieldset>
                <legend>2. A empresa oferece recursos e apoio adequados para um ambiente saudável?</legend>
                <label><input type="radio" name="recursos_apoio" value="Sim" required> Sim</label>
                <label><input type="radio" name="recursos_apoio" value="Não"> Não</label>
                <label><input type="radio" name="recursos_apoio" value="Mais ou menos"> Mais ou menos</label>
            </fieldset>

            <fieldset>
                <legend>3. Você já presenciou ou foi alvo de comportamentos ou comentários inapropriados no trabalho?</legend>
                <label><input type="radio" name="comportamentos_inapropriados" value="Sim" required> Sim</label>
                <label><input type="radio" name="comportamentos_inapropriados" value="Não"> Não</label>
                <label><input type="radio" name="comportamentos_inapropriados" value="Mais ou menos"> Mais ou menos</label>
            </fieldset>

            <fieldset>
                <legend>4. Você já sofreu assédio moral ou outro tipo, dentro da empresa?</legend>
                <label><input type="radio" name="assedio_moral" value="Sim" required> Sim</label>
                <label><input type="radio" name="assedio_moral" value="Não"> Não</label>
                <label><input type="radio" name="assedio_moral" value="Mais ou menos"> Mais ou menos</label>
            </fieldset>

            <fieldset>
                <legend>5. Você está satisfeito com a sua realidade salarial?</legend>
                <label><input type="radio" name="satisfacao_salarial" value="Sim" required> Sim</label>
                <label><input type="radio" name="satisfacao_salarial" value="Não"> Não</label>
                <label><input type="radio" name="satisfacao_salarial" value="Mais ou menos"> Mais ou menos</label>
            </fieldset>

            <fieldset>
                <legend>6. Você já se sentiu explorado alguma vez por excesso de trabalho?</legend>
                <label><input type="radio" name="explorado_trabalho" value="Sim" required> Sim</label>
                <label><input type="radio" name="explorado_trabalho" value="Não"> Não</label>
                <label><input type="radio" name="explorado_trabalho" value="Mais ou menos"> Mais ou menos</label>
            </fieldset>
            
            <fieldset>
                <legend>7. Deseja acrescentar alguma observação?</legend>
                <textarea name="observacao" rows="4"></textarea>
            </fieldset>

            <button type="button" onclick="enviarPesquisa()">Enviar</button>
        </form>
    </div>
   
    <div class="container hidden" id="successMessage">
        <h2>Obrigado por participar!</h2>
        <p class="success-message">Sua pesquisa foi enviada com sucesso.</p>
        <button onclick="voltarAoInicio()">Responder nova pesquisa</button>
    </div>

    <script>
        // Capitaliza a primeira letra do nome e da loja ao sair do campo
        document.getElementById('nome').addEventListener('blur', function() {
            this.value = capitalizarTexto(this.value);
        });

        document.getElementById('loja').addEventListener('blur', function() {
            this.value = capitalizarTexto(this.value);
        });

        // Função para capitalizar texto
        function capitalizarTexto(texto) {
            return texto.toLowerCase()
                .replace(/(^|\s)\S/g, function(letra) {
                    return letra.toUpperCase();
                });
        }

        // Passo 1: Coletar nome
        function proximoPasso() {
            var nome = document.getElementById("nome").value.trim();
            if (nome !== "") {
                document.getElementById("step1").classList.add("hidden");
                document.getElementById("step2").classList.remove("hidden");
                document.getElementById("userName").textContent = nome;
                document.getElementById("hiddenNome").value = nome;
            }
        }

        // Passo 2: Coletar loja
        function iniciarPesquisa() {
            var loja = document.getElementById("loja").value.trim();
            if (loja !== "") {
                document.getElementById("step2").classList.add("hidden");
                document.getElementById("survey").classList.remove("hidden");
                document.getElementById("hiddenLoja").value = loja;
            }
        }
        
        // Enviar pesquisa
        function enviarPesquisa() {
            // 1. Validar se todas as perguntas foram respondidas
            const radios = document.querySelectorAll('input[type="radio"]:checked');
            if (radios.length < 6) {
                alert("Por favor, responda todas as perguntas!");
                return;
            }

            // 2. Coletar dados do formulário
            const formData = new FormData(document.getElementById('surveyForm'));
            const pesquisa = {
                nome: formData.get('nome'),
                loja: formData.get('loja'),
                data: new Date().toLocaleDateString('pt-BR'),
                hora: new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),
                respostas: {
                    respeito_valorizado: formData.get('respeito_valorizado'),
                    recursos_apoio: formData.get('recursos_apoio'),
                    comportamentos_inapropriados: formData.get('comportamentos_inapropriados'),
                    assedio_moral: formData.get('assedio_moral'),
                    satisfacao_salarial: formData.get('satisfacao_salarial'),
                    explorado_trabalho: formData.get('explorado_trabalho'),
                    observacao: formData.get('observacao')
                }
            };

            // 3. Salvar no localStorage
            let pesquisas = JSON.parse(localStorage.getItem('pesquisas')) || [];
            pesquisas.push(pesquisa);
            localStorage.setItem('pesquisas', JSON.stringify(pesquisas));

            // 4. Mostrar mensagem de sucesso
            document.getElementById("survey").classList.add("hidden");
            document.getElementById("successMessage").classList.remove("hidden");
            
            // 5. Limpar formulário (opcional)
            document.getElementById("surveyForm").reset();
        }
        
        // Voltar ao início
        function voltarAoInicio() {
            document.getElementById("successMessage").classList.add("hidden");
            document.getElementById("step1").classList.remove("hidden");
            document.getElementById("nome").value = "";
            document.getElementById("loja").value = "";
        }

        // Inicialização: Mostra o primeiro passo
        document.getElementById("step1").classList.remove("hidden");
    </script>
</body>
</html>